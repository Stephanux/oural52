{
    "GET/": {
        "controler": "getView",
        "view": "login",
        "title": "Authentification"
    },
    "GET/index": {
        "controler": "getView",
        "view": "index",
        "title": "Bienvenue dans le framework Node/Express"
    },
    "GET/logout": {
        "controler": "logout",
        "view": "login",
        "title": "Bienvenue dans le framework Node/Express"
    },
    "GET/users": {
        "controler": "populate",
        "modelName": "Users",
        "view": "users"
    },
    "GET/formUser": {
        "controler": "findByIdWithList",
        "modelName": "Users",
        "modelList": "Countries",
        "view": "formUser",
        "form_action": "/modifyUser"
    },
    "POST/modifyUser": {
        "controler": "updateById",
        "modelName": "Users",
        "view": "modifyUser"
    },
    "GET/newUser": {
        "controler": "finder",
        "modelName": "Users",
        "modelList": "Countries",
        "view": "formUser",
        "form_action": "/createUser",
        "title": "Create a new user",
        "libelle": "creation"
    },
    "POST/createUser": {
        "controler": "insertOne",
        "modelName": "Users",
        "view": "users"
    },
    "GET/deleteUser": {
        "controler": "deleteById",
        "modelName": "Users",
        "view": "users"
    },
    "GET/accueil": {
        "controler": "getViewWithAuth",
        "view": "main",
        "title": "Accueil"
    },
    "GET/formInsertVehicule": {
        "controler": "selectListSchemas",
        "view": "addVehicule",
        "tables_list": [
            "marques",
            "type_vehicule"
        ],
        "sql_list": [
            "select * FROM marques",
            "select * from type_vehicule"
        ],
        "form_action": "/addVehicule",
        "title": "Ajoutez un véhicule"
    },
    "POST/addVehicule": {
        "controler": "addMultiTableSQL",
        "view": "addVehicule",
        "table_list":[
            "Vehicules",
            "modele"
        ],
        "requests": [
            "INSERT INTO Vehicules (nom_vehicule, date_mise_circulation, id_type_vehicule, id_modele) VALUES (?, ?, ?, ?)",
            "INSERT INTO modele (nom_modele, id_marque) VALUES (?, ?)"],
        "title": "Ajoutez un véhicule",
        "redirect": "/formInsertVehicule"
    },
    "GET/formInsertTypeVehicule": {
        "controler": "selectListSchemas",
        "view": "addTypeVehicule",
        "tables_list": ["type_vehicule"],
        "sql_list": ["SELECT * FROM type_vehicule"],
        "form_action": "/addTypeVehicule",
        "title": "Ajoutez un type de véhicule"
    },
    "POST/addTypeVehicule": {
        "controler": "addSQLAndUploadSingle",
        "view": "addTypeVehicule",
        "request": "INSERT INTO type_vehicule (nom_type_vehicule, doc_pdf) VALUES (?, ?)",
        "title": "Ajoutez un type de véhicule",
        "redirect": "/formInsertTypeVehicule"
    },
    "GET/listTypeVehicule": {
        "controler": "selectListSchemas",
        "view": "listTypeVehicule",
        "tables_list": ["type_vehicule"],
        "sql_list": ["select * from type_vehicule"],
        "title": "Modifiez un type de véhicule"
    },
    "GET/formEditTypeVehicule": {
        "controler": "selectByIdAndListSchemas",
        "view": "editTypeVehiculeById",
        "tables_list": ["type_vehicule"],
        "sql_list": ["select * from type_vehicule"],
        "sql_query": "SELECT id_type_vehicule, nom_type_vehicule, doc_pdf FROM type_vehicule WHERE type_vehicule.id_type_vehicule=?",
        "form_action": "/editTypeVehicule",
        "title": "Modifiez un type de véhicule"
    },
    "POST/editTypeVehicule": {
        "controler": "updateSQLAndUploadSingle",
        "view": "editTypeVehiculeById",
        "sql_query": "UPDATE type_vehicule SET nom_type_vehicule=?, doc_pdf=? WHERE type_vehicule.id_type_vehicule=?",
        "params_query": [
            "type_vehicule",
            "doc_pdf",
            "id"
        ],
        "redirect": "/listTypeVehicule",
        "title": "Modifiez un type de véhicule"
    },
    "GET/formInsertMarque": {
        "controler": "selectListSchemas",
        "view": "addMarque",
        "tables_list": ["marques"],
        "sql_list": ["select * from marques"],
        "form_action": "/addMarque",
        "title": "Ajoutez une marque de véhicule"
    },
    "POST/addMarque": {
        "controler": "addSQL",
        "view": "addMarque",
        "request": "insert into marques (nom_marque) VALUES (?)",
        "title": "Ajoutez une marque de véhicule",
        "redirect": "/formInsertMarque"
    },
    "GET/listMarqueVehicule": {
        "controler": "selectListSchemas",
        "view": "listMarqueVehicule",
        "tables_list": ["marques"],
        "sql_list": ["select * from marques"],
        "title": "Modifiez une marque de véhicule"
    },
    "GET/formEditMarqueVehicule": {
        "controler": "selectByIdAndListSchemas",
        "view": "editMarqueVehiculeById",
        "tables_list": ["marques"],
        "sql_list": ["select * from marques"],
        "sql_query": "SELECT id_marque, nom_marque FROM marques WHERE marques.id_marque=?",
        "form_action": "/editMarqueVehicule",
        "title": "Modifiez une marque de véhicule"
    },
    "POST/editMarqueVehicule": {
        "controler": "updateSQL",
        "view": "editMarqueVehiculeById",
        "sql_query": "UPDATE marques SET nom_marque=? WHERE marques.id_marque=?",
        "params_query": [
            "marque",
            "id"
        ],
        "redirect": "/listMarqueVehicule",
        "title": "Modifiez une marque de véhicule"
    },
    "GET/formInsertPiece": {
        "controler": "selectListSchemas",
        "view": "addPiece",
        "tables_list": [
            "pieces_detachees",
            "type_p_d"],
        "sql_list": [
            "SELECT * FROM pieces_detachees",
            "SELECT * FROM type_p_d"],
        "form_action": "/addPiece",
        "title": "Ajoutez une pièce détachée"
    },
    "POST/addPiece": {
        "controler": "addSQLAndUploadMultiple",
        "view": "addPiece",
        "request": "INSERT INTO pieces_detachees (nom_p_d, longueur, largeur, diametre, localisation, etat, id_type_p_d, photo, doc_pdf) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)",
        "title": "Ajoutez une pièce détachée",
        "redirect": "/formInsertPiece",
        "fieldUpload": [{
            "name": "photo",
            "maxCount": 1
        }, {
            "name": "doc_pdf",
            "maxCount": 1
        }]
    },
    "GET/formInsertTypePiece": {
        "controler": "selectListSchemas",
        "view": "addTypePiece",
        "tables_list": [
            "type_p_d"
        ],
        "sql_list": [
            "select * from type_p_d"
        ],
        "form_action": "/addTypePiece",
        "title": "Ajoutez un type de pièce détachée"
    },
    "POST/addTypePiece": {
        "controler": "addSQL",
        "view": "addTypePiece",
        "request": "INSERT INTO type_p_d (nom_type_p_d) VALUES (?)",
        "title": "Ajoutez un type de pièce détachée",
        "redirect": "/formInsertTypePiece"
    },
    "GET/formInsertSousTypePiece": {
        "controler": "selectListSchemas",
        "view": "addSousTypePiece",
        "tables_list": [
            "sous_type_p_d",
            "type_p_d"
        ],
        "sql_list": [
            "select * from sous_type_p_d",
            "select * from type_p_d"
        ],
        "form_action": "/addSousTypePiece",
        "title": "Ajoutez un sous-type de pièce détachée"
    },
    "POST/addSousTypePiece": {
        "controler": "addSQL",
        "view": "addSousTypePiece",
        "request": "INSERT INTO sous_type_p_d (nom_stype, id_type_p_d) VALUES (?, ?)",
        "title": "Ajoutez un sous-type de pièce détachée",
        "redirect": "/formInsertSousTypePiece"
    },
    "GET/stockVehicule": {
        "controler": "selectListSchemas",
        "view": "stockVehicule",
        "tables_list": ["Vehicules"],
        "sql_list": ["SELECT id_vehicule, nom_vehicule, date_mise_circulation, modele.id_marque, Vehicules.id_type_vehicule, Vehicules.id_modele, marques.nom_marque, type_vehicule.nom_type_vehicule, type_vehicule.doc_pdf FROM Vehicules, marques, type_vehicule, modele WHERE modele.id_marque = marques.id_marque AND Vehicules.id_type_vehicule = type_vehicule.id_type_vehicule AND Vehicules.id_modele = modele.id_marque"],
        "form_action": "/editVehicule",
        "title": "Gestion de stock de véhicule"
    },
    "GET/formEditVehicule": {
        "controler": "selectByIdAndListSchemas",
        "view": "editVehicule",
        "tables_list": [
            "marques", 
            "type_vehicule",
            "modele"
        ],
        "sql_list": [
            "SELECT * FROM marques", 
            "SELECT * FROM type_vehicule",
            "SELECT * FROM modele"
        ],
        "sql_query": "SELECT id_vehicule, nom_vehicule, date_mise_circulation, Vehicules.id_marque, Vehicules.id_type_vehicule, Vehicules.id_modele FROM Vehicules WHERE Vehicules.id_vehicule=?",
        "form_action": "/editVehicule",
        "title": "Modifiez un véhicule"
    },
    "POST/editVehicule": {
        "controler": "updateSQL",
        "view": "editVehicule",
        "sql_query": "UPDATE Vehicules SET nom_vehicule=?, date_mise_circulation=?, id_marque=?, id_type_vehicule=?, id_modele=? WHERE Vehicules.id_vehicule=?",
        "params_query": [
            "nameV",
            "dateMEC",
            "marqueV",
            "typeV",
            "modeleV",
            "id"
        ],
        "redirect": "/stockVehicule",
        "title": "Modifiez un véhicule"
    },
    "GET/formDeleteVehicule": {
        "controler": "selectSQLById",
        "view": "deleteVehicule",
        "sql_query": "SELECT id_vehicule, nom_vehicule, date_mise_circulation, Vehicules.id_marque, Vehicules.id_type_vehicule  FROM Vehicules WHERE Vehicules.id_vehicule=?",
        "title": "Supprimez un véhicule",
        "form_action": "/deleteVehicule"
    },
    "POST/deleteVehicule": {
        "controler": "deleteSQL",
        "view": "deleteVehicule",
        "params_query": ["id"],
        "sql_query": "DELETE from Vehicules WHERE Vehicules.id_vehicule = ?",
        "redirect": "/stockVehicule"
    },
    "GET/stockPiece": {
        "controler": "selectListSchemas",
        "view": "stockPiece",
        "tables_list": ["pieces_detachees"],
        "sql_list": ["SELECT id_p_d, nom_p_d, pieces_detachees.id_type_p_d, type_p_d.nom_type_p_d, photo, longueur, largeur, diametre, localisation, etat, doc_pdf  FROM pieces_detachees, type_p_d WHERE pieces_detachees.id_type_p_d = type_p_d.id_type_p_d"],
        "form_action": "/editPiece",
        "title": "Gestion de stock de pièce détachée"
    },
    "GET/formEditPiece": {
        "controler": "selectByIdAndListSchemas",
        "view": "editPiece",
        "tables_list": ["type_p_d"],
        "sql_list": ["SELECT * FROM type_p_d" ],
        "sql_query": "SELECT id_p_d, nom_p_d, pieces_detachees.id_type_p_d, photo, longueur, largeur, diametre, doc_pdf, localisation, etat  FROM pieces_detachees WHERE pieces_detachees.id_p_d=?",
        "form_action": "/editPiece",
        "title": "Modifiez une pièce détachée"
    },
    "POST/editPiece": {
        "controler": "updateSQLAndUploadMultiple",
        "view": "editPiece",
        "sql_query": "UPDATE pieces_detachees SET nom_p_d=?, id_type_p_d=?, longueur=?, largeur=?, diametre=?, localisation=?, etat=?, photo=?, doc_pdf=? WHERE pieces_detachees.id_p_d=?",
        "params_query": [
            "namePD",
            "typePD",
            "longueur",
            "largeur",
            "diametre",
            "localisation",
            "etat",
            "photo",
            "doc_pdf",
            "id"
        ],
        "redirect": "/stockPiece",
        "title": "Modifiez une pièce",
        "fieldUpload": [{
            "name": "photo",
            "maxCount": 1
        }, {
            "name": "doc_pdf",
            "maxCount": 1
        }]
    },
    "GET/formDeletePiece": {
        "controler": "selectSQLById",
        "view": "deletePiece",
        "sql_query": "SELECT id_p_d, nom_p_d, photo, pieces_detachees.id_type_p_d, longueur, largeur, diametre, doc_pdf, localisation, etat FROM pieces_detachees WHERE pieces_detachees.id_p_d=?",
        "title": "Supprimez une pièce",
        "form_action": "/deletePiece"
    },
    "POST/deletePiece": {
        "controler": "deleteSQL",
        "view": "deletePiece",
        "params_query": ["id"],
        "sql_query": "DELETE from pieces_detachees WHERE pieces_detachees.id_p_d = ?",
        "redirect": "/stockPiece"
    },
    "GET/loginPublic": {
        "controler": "getViewWithAuth",
        "view": "loginPublic",
        "title": "Se connecter"
    }
}